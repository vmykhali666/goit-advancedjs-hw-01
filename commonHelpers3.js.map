{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from \"lodash.throttle\";\n\nconst form = document.querySelector(\".feedback-form\");\nconst FFS_KEY = \"feedback-form-state\";\nconst { email, message } = form.elements;\n\nform.addEventListener(\"input\", throttle(event => {\n    event.preventDefault();\n    \n    let serializedData = {\n        \"email\" : email.value,\n        \"message\" : message.value\n    };\n    localStorage.setItem(FFS_KEY,JSON.stringify(serializedData));\n}, 500));\n\nform.addEventListener(\"submit\", event => {\n    event.preventDefault();\n    let stored = localStorage.getItem(FFS_KEY);\n    if (stored != null) {\n        console.log(JSON.parse(stored));\n    }\n    form.reset();\n    localStorage.clear();\n});\n\naddEventListener(\"load\", event => {\n    try {\n        let stored = localStorage.getItem(FFS_KEY);\n        let storedDTO = JSON.parse(stored);\n        email.value = storedDTO.email ?? \"\";\n        message.value = storedDTO.message ?? \"\";\n    } catch (error) {\n        form.reset();\n    } \n});"],"names":["form","FFS_KEY","email","message","throttle","event","serializedData","stored","storedDTO"],"mappings":"wIAEA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAU,sBACV,CAAE,MAAAC,EAAO,QAAAC,GAAYH,EAAK,SAEhCA,EAAK,iBAAiB,QAASI,EAASC,GAAS,CAC7CA,EAAM,eAAc,EAEpB,IAAIC,EAAiB,CACjB,MAAUJ,EAAM,MAChB,QAAYC,EAAQ,KAC5B,EACI,aAAa,QAAQF,EAAQ,KAAK,UAAUK,CAAc,CAAC,CAC/D,EAAG,GAAG,CAAC,EAEPN,EAAK,iBAAiB,SAAUK,GAAS,CACrCA,EAAM,eAAc,EACpB,IAAIE,EAAS,aAAa,QAAQN,CAAO,EACrCM,GAAU,MACV,QAAQ,IAAI,KAAK,MAAMA,CAAM,CAAC,EAElCP,EAAK,MAAK,EACV,aAAa,MAAK,CACtB,CAAC,EAED,iBAAiB,OAAQK,GAAS,CAC9B,GAAI,CACA,IAAIE,EAAS,aAAa,QAAQN,CAAO,EACrCO,EAAY,KAAK,MAAMD,CAAM,EACjCL,EAAM,MAAQM,EAAU,OAAS,GACjCL,EAAQ,MAAQK,EAAU,SAAW,EACxC,MAAe,CACZR,EAAK,MAAK,CACb,CACL,CAAC"}